<?xml version="1.0" encoding="utf-8" ?>
<component name="MainScene" extends="Scene">
  <script type="text/brightscript" uri="pkg:/components/MainScene.brs" />
  <script type="text/brightscript" uri="pkg:/source/Theme.brs" />

  <children>
    <!-- Tasks -->
    <CountryTask id="countryTask" />
    <RecipeTask id="recipeTask" />
    <ChefProfileTask id="chefTask" />
    
    <!-- Background -->
    <Rectangle id="mainBackground" width="1920" height="1080" color="#101010" />

    <!-- UI Container -->
    <Group id="mainUI" visible="false" opacity="1.0">
        
        <!-- Header / Top Bar -->
        <Label text="CookFlow TV" translation="[100, 50]" font="font:LargeBoldSystemFont" color="#E67E22" />
        
        <!-- Gamification Badges (Top Right) -->
        <GamificationBadges id="gamificationBadges" translation="[1400, 50]" />

        <!-- Main Content Area -->
        <RowList 
            id="recipeList" 
            translation="[100, 200]" 
            itemSize="[1920, 600]" 
            numRows="2" 
            itemSpacing="[20, 0]" 
            rowItemSize="[[320, 240]]" 
            rowItemSpacing="[[20, 0]]"
            showRowLabel="true"
            rowLabelColor="#F5E6CA"
            itemComponentName="StandardGridItem"
        />
        
        <!-- The Cáliz (Bottom Left or Sidebar) -->
        <CalizGoal id="calizGoal" translation="[100, 800]" />

        <!-- Agent Chat (Bottom Right) -->
        <AgentChat id="agentChat" translation="[1200, 600]" />
    </Group>

    <!-- Intro Animation Overlay -->
    <IntroScene id="introScene" />

    <!-- Recipe Detail Overlay -->
    <RecipeDetailScene id="recipeDetail" visible="false" opacity="0.0" />

    <!-- Animations for UI Fade in/out -->
    <Animation id="fadeDetailAnimIn" duration="0.4" easeFunction="linear">
        <FloatFieldInterpolator key="[0.0, 1.0]" keyValue="[0.0, 1.0]" fieldToInterp="recipeDetail.opacity" />
    </Animation>
    
    <Animation id="fadeDetailAnimOut" duration="0.3" easeFunction="linear">
        <FloatFieldInterpolator key="[0.0, 1.0]" keyValue="[1.0, 0.0]" fieldToInterp="recipeDetail.opacity" />
    </Animation>

    <Animation id="fadeOutMainUIAnim" duration="0.3" easeFunction="linear">
        <FloatFieldInterpolator key="[0.0, 1.0]" keyValue="[1.0, 0.0]" fieldToInterp="mainUI.opacity" />
    </Animation>
    
    <Animation id="fadeInMainUIAnim" duration="0.4" easeFunction="linear">
        <FloatFieldInterpolator key="[0.0, 1.0]" keyValue="[0.0, 1.0]" fieldToInterp="mainUI.opacity" />
    </Animation>

    <!-- Polling Timer for Real-Time Cáliz Updates -->
    <Timer id="pollingTimer" repeat="true" duration="15" />
  </children>
</component>